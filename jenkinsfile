pipeline {
    agent {
        docker {
            image 'justb4/jmeter:5.5'
        }
    }
    stages {
        stage('build and install') {
            steps {
                // Installe les dépendances ou autres étapes nécessaires si besoin
                echo 'Building and installing...'
            }
        }

        stage('run jmeter tests') {
            steps {
                // Exécution des tests JMeter
                sh 'mvn jmeter:jmeter -DtestFile=src/test/jmeter/Plandetestdepartements.jmx'
            }
        }
    }
}
